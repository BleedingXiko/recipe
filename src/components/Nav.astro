---
import { Astronav, MenuItems, MenuIcon } from "astro-navbar";

let pathname = new URL(Astro.request.url).pathname;
let currentPath = pathname.slice(1);
currentPath = currentPath.replace("/", "");

---

<header class="p-4 md:p-5">
  <Astronav closeOnClick>
    <div class="flex justify-between items-center">
      <a 
        class={`text-2xl md:text-4xl font-bold ${currentPath === "" ? "active-home" : ""}`} 
        href="/"
        data-pagefind-ignore
      >
        Katchup Kitchen
      </a>
      <div class="block md:hidden">
        <MenuIcon class="w-10 h-10 text-accent hover:opacity-80 transition-opacity" />
      </div>
    </div>
    <MenuItems class="hidden md:flex md:mt-4 mt-4">
      <ul class="flex flex-col w-full gap-6 md:flex-row md:justify-center md:gap-12 text-xl md:text-2xl">
        <li>
          <a 
            class={`block py-2 ${currentPath === "tags" ? "active" : ""} hover:text-accent transition-colors`} 
            href="/tags" 
            data-pagefind-ignore
          >
            Tags
          </a>
        </li>
        <li>
          <a 
            class={`block py-2 ${currentPath === "Recipes" ? "active" : ""} hover:text-accent transition-colors`} 
            href="/Recipes" 
            data-pagefind-ignore
          >
            Recipes
          </a>
        </li>
      </ul>
    </MenuItems>
  </Astronav>
</header>

<style>
  header {
    background-color: var(--secondary);
    color: var(--text);
  }

  .active {
    color: var(--accent);
    font-weight: 600;
  }

  .active-home {
    text-decoration: underline;
    text-decoration-thickness: 2px;
    text-decoration-color: var(--accent);
  }

  /* Mobile menu styling */
  :global(.astronav-toggle) {
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 0.375rem;
    padding: 0.5rem;
    transition: background-color 0.2s;
  }

  :global(.astronav-toggle:hover) {
    background-color: var(--primary);
  }
  
  /* Mobile menu animations */
  :global(.astronav-menu) {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease-in-out;
  }
  
  :global(.astronav-menu.hidden) {
    display: block !important;
    max-height: 0;
  }
  
  :global(.astronav-menu:not(.hidden)) {
    max-height: 300px;
    padding-top: 1rem;
    padding-bottom: 1rem;
  }

  @media (min-width: 768px) {
    :global(.astronav-menu.hidden), 
    :global(.astronav-menu:not(.hidden)) {
      max-height: none;
      padding: 0;
    }
  }
</style>